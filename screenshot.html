<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è§†é¢‘æˆªå›¾å·¥å…· - åŸºäºFFmpeg.wasm</title>
    <script src="./ffmpeg.min.js"></script>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'SF Pro Display', 'PingFang SC', 'Helvetica Neue', Arial,
          sans-serif;
      }

      :root {
        --primary-bg: #e6e7ee;
        --secondary-bg: #ffffff;
        --shadow-light: #ffffff;
        --shadow-dark: #d1d9e6;
        --accent-color: #667eea;
        --accent-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --success-color: #4ecdc4;
        --danger-color: #ff6b6b;
        --warning-color: #feca57;
        --text-primary: #2d3748;
        --text-secondary: #718096;
        --glass-bg: rgba(255, 255, 255, 0.25);
        --glass-border: rgba(255, 255, 255, 0.18);
      }

      body {
        background: var(--primary-bg);
        color: var(--text-primary);
        min-height: 100vh;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        transition: all 0.3s ease;
        animation: pageLoad 0.8s ease;
      }

      @keyframes pageLoad {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .container {
        width: 100%;
        max-width: 1200px;
        background: var(--primary-bg);
        border-radius: 30px;
        padding: 40px;
        box-shadow: 20px 20px 60px var(--shadow-dark),
          -20px -20px 60px var(--shadow-light);
        margin-top: 20px;
        transition: all 0.3s ease;
        animation: containerFloat 1s ease 0.2s both;
      }

      @keyframes containerFloat {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .container:hover {
        box-shadow: 25px 25px 70px var(--shadow-dark),
          -25px -25px 70px var(--shadow-light);
      }

      /* æ‹Ÿæ€é£æ ¼å¡ç‰‡ */
      .neumorphic-card {
        background: var(--primary-bg);
        border-radius: 25px;
        box-shadow: 12px 12px 24px var(--shadow-dark),
          -12px -12px 24px var(--shadow-light);
        transition: all 0.3s ease;
      }

      .neumorphic-inset {
        background: var(--primary-bg);
        border-radius: 20px;
        box-shadow: inset 8px 8px 16px var(--shadow-dark),
          inset -8px -8px 16px var(--shadow-light);
        transition: all 0.3s ease;
      }

      /* ç»ç’ƒæ€æ•ˆæœ */
      .glass-effect {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
      }

      header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: var(--primary-bg);
        border-radius: 25px;
        box-shadow: 10px 10px 20px var(--shadow-dark),
          -10px -10px 20px var(--shadow-light);
        animation: headerSlide 0.8s ease 0.4s both;
      }

      @keyframes headerSlide {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      h1 {
        font-size: 3.2rem;
        margin-bottom: 15px;
        background: var(--accent-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 700;
        animation: titleGlow 3s ease-in-out infinite alternate;
      }

      @keyframes titleGlow {
        from {
          filter: brightness(1);
        }
        to {
          filter: brightness(1.2);
        }
      }

      .subtitle {
        font-size: 1.3rem;
        color: var(--text-secondary);
        margin-bottom: 30px;
        font-weight: 500;
      }

      .panels {
        display: flex;
        gap: 30px;
        margin-bottom: 40px;
        flex-wrap: wrap;
        animation: panelsSlide 0.8s ease 0.6s both;
      }

      @keyframes panelsSlide {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .panel {
        flex: 1;
        min-width: 300px;
        background: var(--primary-bg);
        border-radius: 25px;
        padding: 30px;
        box-shadow: 12px 12px 24px var(--shadow-dark),
          -12px -12px 24px var(--shadow-light);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.8s;
      }

      .panel:hover::before {
        left: 100%;
      }

      .panel:hover {
        transform: translateY(-5px);
        box-shadow: 16px 16px 32px var(--shadow-dark),
          -16px -16px 32px var(--shadow-light);
      }

      .panel-title {
        font-size: 1.6rem;
        margin-bottom: 25px;
        color: var(--accent-color);
        display: flex;
        align-items: center;
        font-weight: 600;
      }

      .panel-title::before {
        content: attr(data-icon);
        margin-right: 12px;
        font-size: 1.8rem;
        animation: iconBounce 2s ease-in-out infinite;
      }

      @keyframes iconBounce {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      .file-upload {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        border: 2px solid transparent;
        border-radius: 25px;
        padding: 40px;
        text-align: center;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        margin-bottom: 25px;
        background: var(--primary-bg);
        box-shadow: 12px 12px 24px var(--shadow-dark),
          -12px -12px 24px var(--shadow-light);
        height: 260px;
        overflow: hidden;
        position: relative;
      }

      .file-upload::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 25px;
        padding: 2px;
        background: linear-gradient(
          135deg,
          var(--accent-color),
          var(--success-color),
          var(--accent-color)
        );
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .file-upload::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(
          circle,
          rgba(102, 126, 234, 0.1) 0%,
          transparent 70%
        );
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.4s ease;
        pointer-events: none;
      }

      .file-upload:hover {
        transform: translateY(-5px);
        box-shadow: 16px 16px 32px var(--shadow-dark),
          -16px -16px 32px var(--shadow-light),
          0 15px 40px rgba(102, 126, 234, 0.15);
      }

      .file-upload:hover::before {
        opacity: 1;
      }

      .file-upload:hover::after {
        width: 200px;
        height: 200px;
      }

      .file-upload.dragover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: inset 8px 8px 16px rgba(78, 205, 196, 0.2),
          inset -8px -8px 16px rgba(255, 255, 255, 0.8),
          0 20px 50px rgba(78, 205, 196, 0.3);
      }

      .file-upload.dragover::before {
        opacity: 1;
        background: linear-gradient(
          135deg,
          var(--success-color),
          var(--accent-color),
          var(--success-color)
        );
      }

      .file-upload.dragover::after {
        width: 250px;
        height: 250px;
        background: radial-gradient(
          circle,
          rgba(78, 205, 196, 0.15) 0%,
          transparent 70%
        );
      }

      .file-upload input[type='file'] {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
        z-index: 10;
      }

      .file-upload-content {
        position: relative;
        z-index: 5;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
      }

      .file-upload-icon {
        font-size: 3rem;
        margin-bottom: 8px;
        transition: all 0.3s ease;
        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.1));
      }

      .file-upload:hover .file-upload-icon {
        transform: scale(1.1) rotate(5deg);
        filter: drop-shadow(3px 3px 6px rgba(0, 0, 0, 0.15));
      }

      .file-upload.dragover .file-upload-icon {
        transform: scale(1.2) rotate(-5deg);
        filter: drop-shadow(4px 4px 8px rgba(0, 0, 0, 0.2));
      }

      .file-upload-text {
        margin: 0;
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-primary);
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
        transition: all 0.3s ease;
      }

      .file-upload-subtext {
        margin: 0;
        font-size: 0.95rem;
        font-weight: 400;
        color: var(--text-secondary);
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.6);
        transition: all 0.3s ease;
      }

      .file-upload:hover .file-upload-text {
        color: var(--accent-color);
        transform: translateY(-2px);
      }

      .file-upload:hover .file-upload-subtext {
        color: var(--text-primary);
        transform: translateY(-1px);
      }

      .file-upload.dragover .file-upload-text {
        color: var(--success-color);
        transform: translateY(-3px) scale(1.05);
      }

      .file-upload.dragover .file-upload-subtext {
        color: var(--success-color);
        transform: translateY(-2px) scale(1.02);
      }

      .file-upload-formats {
        margin-top: 8px;
        font-size: 0.8rem;
        color: var(--text-secondary);
        opacity: 0.7;
        transition: all 0.3s ease;
      }

      .file-upload:hover .file-upload-formats {
        opacity: 1;
        color: var(--accent-color);
      }

      .video-container {
        width: 100%;
        background: var(--primary-bg);
        border-radius: 20px;
        overflow: hidden;
        margin-top: 20px;
        box-shadow: inset 10px 10px 20px var(--shadow-dark),
          inset -10px -10px 20px var(--shadow-light);
        transition: all 0.3s ease;
      }

      .video-container:hover {
        box-shadow: inset 12px 12px 24px var(--shadow-dark),
          inset -12px -12px 24px var(--shadow-light);
      }

      video {
        width: 100%;
        max-height: 400px;
        display: block;
        border-radius: 15px;
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      button {
        background: var(--primary-bg);
        color: var(--text-primary);
        border: none;
        padding: 14px 28px;
        border-radius: 15px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        font-size: 1rem;
        flex-shrink: 0;
        box-shadow: 8px 8px 16px var(--shadow-dark),
          -8px -8px 16px var(--shadow-light);
        position: relative;
        overflow: hidden;
      }

      button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      button:hover::before {
        left: 100%;
      }

      button:hover {
        transform: translateY(-3px);
        box-shadow: 12px 12px 24px var(--shadow-dark),
          -12px -12px 24px var(--shadow-light);
      }

      button:active {
        transform: translateY(0);
        box-shadow: inset 6px 6px 12px var(--shadow-dark),
          inset -6px -6px 12px var(--shadow-light);
      }

      button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
        box-shadow: 4px 4px 8px var(--shadow-dark),
          -4px -4px 8px var(--shadow-light);
      }

      .btn-primary {
        background: var(--accent-gradient);
        color: white;
        padding: 16px 32px;
        font-size: 1.1rem;
        box-shadow: 8px 8px 16px var(--shadow-dark),
          -8px -8px 16px var(--shadow-light),
          inset 0 1px 0 rgba(255, 255, 255, 0.2);
      }

      .btn-primary:hover {
        box-shadow: 12px 12px 24px var(--shadow-dark),
          -12px -12px 24px var(--shadow-light),
          inset 0 1px 0 rgba(255, 255, 255, 0.2),
          0 0 30px rgba(102, 126, 234, 0.3);
      }

      .result-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 20px;
        min-height: 200px;
        background: var(--primary-bg);
        border-radius: 20px;
        padding: 20px;
        box-shadow: inset 10px 10px 20px var(--shadow-dark),
          inset -10px -10px 20px var(--shadow-light);
      }

      .screenshot-item {
        flex: 1;
        min-width: 250px;
        background: var(--primary-bg);
        border-radius: 15px;
        padding: 15px;
        text-align: center;
        box-shadow: 6px 6px 12px var(--shadow-dark),
          -6px -6px 12px var(--shadow-light);
        transition: all 0.3s ease;
        animation: screenshotSlideIn 0.5s ease;
      }

      @keyframes screenshotSlideIn {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .screenshot-item:hover {
        transform: translateY(-5px);
        box-shadow: 10px 10px 20px var(--shadow-dark),
          -10px -10px 20px var(--shadow-light);
      }

      .screenshot-item img {
        width: 100%;
        border-radius: 10px;
        margin-bottom: 10px;
        max-height: 200px;
        object-fit: contain;
        box-shadow: inset 2px 2px 4px var(--shadow-dark),
          inset -2px -2px 4px var(--shadow-light);
      }

      .screenshot-info {
        display: flex;
        justify-content: space-between;
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-bottom: 10px;
        font-weight: 500;
      }

      .download-btn {
        background: var(--success-color);
        color: white;
        padding: 8px 16px;
        font-size: 0.9rem;
        border-radius: 10px;
        box-shadow: 4px 4px 8px var(--shadow-dark),
          -4px -4px 8px var(--shadow-light);
      }

      .progress-container {
        margin: 25px 0;
        background: var(--primary-bg);
        border-radius: 15px;
        padding: 20px;
        box-shadow: inset 6px 6px 12px var(--shadow-dark),
          inset -6px -6px 12px var(--shadow-light);
      }

      .progress-bar {
        height: 12px;
        background: var(--primary-bg);
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 10px;
        box-shadow: inset 4px 4px 8px var(--shadow-dark),
          inset -4px -4px 8px var(--shadow-light);
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background: var(--accent-gradient);
        width: 0%;
        transition: width 0.3s ease;
        border-radius: 6px;
        position: relative;
        overflow: hidden;
      }

      .progress-fill::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: progressShine 2s infinite;
      }

      @keyframes progressShine {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .progress-text {
        text-align: center;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .status-area {
        min-height: 50px;
        margin: 15px 0;
        padding: 15px;
        border-radius: 15px;
        background: var(--primary-bg);
        box-shadow: inset 6px 6px 12px var(--shadow-dark),
          inset -6px -6px 12px var(--shadow-light);
      }

      .status-message {
        color: var(--accent-color);
        font-weight: 600;
        animation: statusPulse 2s ease-in-out infinite;
      }

      @keyframes statusPulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .error-message {
        color: var(--danger-color);
        font-weight: 600;
        animation: errorShake 0.5s ease-in-out;
      }

      @keyframes errorShake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      .instructions {
        background: var(--primary-bg);
        border-radius: 25px;
        padding: 30px;
        margin-top: 30px;
        box-shadow: 12px 12px 24px var(--shadow-dark),
          -12px -12px 24px var(--shadow-light);
        animation: instructionsSlide 0.8s ease 0.8s both;
      }

      @keyframes instructionsSlide {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .instructions h3 {
        color: var(--accent-color);
        margin-bottom: 15px;
        font-size: 1.4rem;
        font-weight: 600;
      }

      .instructions ol {
        padding-left: 20px;
        margin-bottom: 15px;
      }

      .instructions li {
        margin-bottom: 10px;
        line-height: 1.6;
        color: var(--text-secondary);
      }

      .instructions p {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 10px;
      }

      .instructions code {
        background: rgba(102, 126, 234, 0.1);
        padding: 2px 6px;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
        color: var(--accent-color);
      }

      footer {
        margin-top: 30px;
        text-align: center;
        color: var(--text-secondary);
        font-size: 0.9rem;
        padding: 20px;
        background: var(--primary-bg);
        border-radius: 20px;
        box-shadow: 8px 8px 16px var(--shadow-dark),
          -8px -8px 16px var(--shadow-light);
        animation: footerSlide 0.8s ease 1s both;
      }

      @keyframes footerSlide {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* å“åº”å¼è®¾è®¡ä¼˜åŒ– */
      @media (max-width: 1024px) {
        .panels {
          flex-direction: column;
          gap: 20px;
        }

        .panel {
          min-width: auto;
        }
      }

      @media (max-width: 768px) {
        body {
          padding: 10px;
        }

        .container {
          padding: 15px;
          margin-top: 10px;
          border-radius: 20px;
        }

        header {
          padding: 20px 15px;
          margin-bottom: 20px;
          border-radius: 20px;
        }

        h1 {
          font-size: 2.2rem;
          margin-bottom: 10px;
        }

        .subtitle {
          font-size: 1.1rem;
          margin-bottom: 20px;
        }

        .panels {
          gap: 15px;
          margin-bottom: 20px;
        }

        .panel {
          padding: 20px 15px;
          border-radius: 20px;
        }

        .panel-title {
          font-size: 1.3rem;
          margin-bottom: 20px;
        }

        .file-upload {
          padding: 25px 15px;
          height: 130px;
          margin-bottom: 20px;
          border-radius: 20px;
        }

        .file-upload-icon {
          font-size: 2.5rem;
          margin-bottom: 6px;
        }

        .file-upload-text {
          font-size: 1rem;
        }

        .file-upload-subtext {
          font-size: 0.9rem;
        }

        .file-upload-formats {
          font-size: 0.75rem;
          margin-top: 6px;
        }

        .controls {
          flex-direction: column;
          align-items: stretch;
          gap: 10px;
        }

        button {
          padding: 12px 20px;
          font-size: 0.95rem;
          width: 100%;
        }

        .btn-primary {
          padding: 14px 24px;
          font-size: 1rem;
        }

        .result-container {
          padding: 15px;
          min-height: 150px;
        }

        .screenshot-item {
          min-width: 100%;
          margin-bottom: 15px;
        }

        .instructions {
          padding: 20px 15px;
          margin-top: 20px;
          border-radius: 20px;
        }

        .instructions h3 {
          font-size: 1.2rem;
        }

        footer {
          padding: 15px;
          margin-top: 20px;
          border-radius: 15px;
          font-size: 0.85rem;
        }
      }

      @media (max-width: 480px) {
        body {
          padding: 8px;
        }

        .container {
          padding: 12px;
          border-radius: 15px;
        }

        header {
          padding: 15px 12px;
          border-radius: 15px;
        }

        h1 {
          font-size: 1.8rem;
        }

        .subtitle {
          font-size: 1rem;
        }

        .panel {
          padding: 15px 12px;
          border-radius: 15px;
        }

        .panel-title {
          font-size: 1.2rem;
          margin-bottom: 15px;
        }

        .file-upload {
          padding: 20px 12px;
          height: 210px;
          border-radius: 15px;
        }

        .file-upload-content {
          gap: 8px;
        }

        .file-upload-icon {
          font-size: 2rem;
          margin-bottom: 4px;
        }

        .file-upload-text {
          font-size: 0.9rem;
        }

        .file-upload-subtext {
          font-size: 0.8rem;
        }

        .file-upload-formats {
          font-size: 0.7rem;
          margin-top: 4px;
        }

        button {
          padding: 10px 16px;
          font-size: 0.9rem;
        }

        .btn-primary {
          padding: 12px 20px;
          font-size: 0.95rem;
        }

        .instructions {
          padding: 15px 12px;
        }

        .instructions ol {
          padding-left: 16px;
        }

        .instructions li {
          font-size: 0.9rem;
          margin-bottom: 8px;
        }

        footer {
          padding: 12px;
          font-size: 0.8rem;
        }
      }

      /* æš—è‰²æ¨¡å¼æ”¯æŒ */
      @media (prefers-color-scheme: dark) {
        :root {
          --primary-bg: #2d3748;
          --shadow-light: #4a5568;
          --shadow-dark: #1a202c;
          --text-primary: #f7fafc;
          --text-secondary: #a0aec0;
        }
      }

      /* åŠ¨ç”»ä¼˜åŒ– */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* è‡ªå®šä¹‰æ»šåŠ¨æ¡ */
      ::-webkit-scrollbar {
        width: 12px;
      }

      ::-webkit-scrollbar-track {
        background: var(--primary-bg);
        border-radius: 10px;
      }

      ::-webkit-scrollbar-thumb {
        background: var(--accent-color);
        border-radius: 10px;
        border: 2px solid var(--primary-bg);
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--accent-gradient);
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ğŸ¬ è§†é¢‘æˆªå›¾å·¥å…·</h1>
      <p class="subtitle">åŸºäº FFmpeg.wasm æŠ€æœ¯ - åœ¨æµè§ˆå™¨ä¸­ç²¾å‡†æˆªå–è§†é¢‘å¸§</p>
    </header>

    <div class="container">
      <div class="panels">
        <div class="panel">
          <h2 class="panel-title" data-icon="ğŸ“">1. ä¸Šä¼ è§†é¢‘æ–‡ä»¶</h2>
          <div class="file-upload" id="fileDropArea">
            <div class="file-upload-content">
              <div class="file-upload-icon">ğŸ¬</div>
              <p class="file-upload-text">æ‹–æ”¾è§†é¢‘æ–‡ä»¶åˆ°æ­¤å¤„</p>
              <p class="file-upload-subtext">æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
              <p class="file-upload-formats">æ”¯æŒ MP4ã€MOVã€AVIã€MKV ç­‰æ ¼å¼</p>
            </div>
            <input type="file" id="videoInput" accept="video/*" />
          </div>

          <div id="videoContainer" class="video-container">
            <video id="videoPlayer" controls>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾</video>
          </div>

          <div class="controls">
            <button id="captureBtn" class="btn-primary" disabled>
              ğŸ“¸ æˆªå–å½“å‰å¸§
            </button>
            <button id="resetBtn">ğŸ”„ é‡ç½®æ‰€æœ‰</button>
          </div>

          <div class="progress-container">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">ğŸš€ å‡†å¤‡å°±ç»ª</div>
          </div>

          <div class="status-area">
            <div class="status-message" id="statusMessage"></div>
            <div class="error-message" id="errorMessage"></div>
          </div>
        </div>

        <div class="panel">
          <h2 class="panel-title" data-icon="ğŸ–¼ï¸">2. æˆªå›¾ç»“æœ</h2>
          <div id="resultContainer" class="result-container">
            <p
              style="
                text-align: center;
                width: 100%;
                padding: 40px 0;
                color: var(--text-secondary);
                font-size: 1.1rem;
              "
            >
              ğŸ“· æˆªå›¾å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ
            </p>
          </div>

          <div class="controls">
            <button id="downloadAllBtn" disabled>ğŸ“¥ ä¸‹è½½æ‰€æœ‰æˆªå›¾</button>
          </div>
        </div>
      </div>

      <div class="instructions">
        <h3>ğŸ“– ä½¿ç”¨è¯´æ˜ï¼š</h3>
        <ol>
          <li>ğŸ¥ ä¸Šä¼ è§†é¢‘æ–‡ä»¶ï¼ˆæ”¯æŒMP4ã€MOVã€AVIç­‰æ ¼å¼ï¼‰</li>
          <li>ğŸ® ä½¿ç”¨è§†é¢‘æ’­æ”¾å™¨æ§åˆ¶æ’­æ”¾è¿›åº¦ï¼Œæ‰¾åˆ°æƒ³è¦æˆªå–çš„ç”»é¢</li>
          <li>ğŸ“¸ ç‚¹å‡»"æˆªå–å½“å‰å¸§"æŒ‰é’®ç”Ÿæˆé«˜æ¸…æˆªå›¾</li>
          <li>ğŸ“¥ æˆªå›¾ä¼šæ˜¾ç¤ºåœ¨å³ä¾§åŒºåŸŸï¼Œå¯ä¸‹è½½å•å¼ æˆ–æ‰€æœ‰æˆªå›¾</li>
          <li>ğŸ”„ ä½¿ç”¨"é‡ç½®æ‰€æœ‰"æŒ‰é’®å¯ä»¥æ¸…é™¤å½“å‰è§†é¢‘å’Œæˆªå›¾</li>
        </ol>
        <p>
          ğŸ’¡ æŠ€æœ¯è¯´æ˜ï¼šä½¿ç”¨FFmpegçš„<code>-ss</code>å‚æ•°æŒ‡å®šæ—¶é—´ç‚¹ï¼Œ<code
            >-vframes 1</code
          >å‚æ•°æˆªå–å•å¸§
        </p>
        <p>
          ğŸ”’
          æ³¨æ„ï¼šæœ¬å·¥å…·å®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œä¸ä¼šä¸Šä¼ æ‚¨çš„è§†é¢‘æ–‡ä»¶ï¼Œç¡®ä¿éšç§å®‰å…¨ã€‚
        </p>
      </div>
    </div>

    <footer>
      <p>
        âš¡ åŸºäº FFmpeg.wasm æŠ€æœ¯å®ç° | ğŸŒ å®Œå…¨åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ | ğŸ”
        æ— éœ€ä¸Šä¼ åˆ°æœåŠ¡å™¨
      </p>
      <p>Â© 2025 ç½‘é¡µç‰ˆè§†é¢‘æˆªå›¾å·¥å…·</p>
    </footer>

    <script>
      // FFmpegå®ä¾‹
      let ffmpeg = null
      let inputFile = null
      let videoUrl = null
      let screenshots = []
      let screenshotCount = 0

      // DOMå…ƒç´ 
      const videoInput = document.getElementById('videoInput')
      const videoPlayer = document.getElementById('videoPlayer')
      const captureBtn = document.getElementById('captureBtn')
      const resetBtn = document.getElementById('resetBtn')
      const downloadAllBtn = document.getElementById('downloadAllBtn')
      const statusMessage = document.getElementById('statusMessage')
      const errorMessage = document.getElementById('errorMessage')
      const progressFill = document.getElementById('progressFill')
      const progressText = document.getElementById('progressText')
      const resultContainer = document.getElementById('resultContainer')
      const fileDropArea = document.getElementById('fileDropArea')

      // é¡µé¢åŠ è½½åŠ¨ç”»
      window.addEventListener('DOMContentLoaded', () => {
        document.body.style.opacity = '0'
        setTimeout(() => {
          document.body.style.transition = 'opacity 0.5s ease'
          document.body.style.opacity = '1'
        }, 100)
      })

      // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
      function initEvents() {
        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        videoInput.addEventListener('change', handleFileUpload)

        // æˆªå›¾æŒ‰é’®
        captureBtn.addEventListener('click', captureFrame)

        // é‡ç½®æŒ‰é’®
        resetBtn.addEventListener('click', resetAll)

        // ä¸‹è½½æ‰€æœ‰æˆªå›¾æŒ‰é’®
        downloadAllBtn.addEventListener('click', downloadAllScreenshots)

        // æ‹–æ”¾åŠŸèƒ½
        fileDropArea.addEventListener('dragover', (e) => {
          e.preventDefault()
          fileDropArea.classList.add('dragover')
        })

        fileDropArea.addEventListener('dragleave', () => {
          fileDropArea.classList.remove('dragover')
        })

        fileDropArea.addEventListener('drop', (e) => {
          e.preventDefault()
          fileDropArea.classList.remove('dragover')

          if (e.dataTransfer.files.length) {
            videoInput.files = e.dataTransfer.files
            handleFileUpload({ target: { files: e.dataTransfer.files } })
          }
        })
      }

      // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
      function handleFileUpload(event) {
        const file = event.target.files[0]
        if (!file) return

        // æ£€æŸ¥æ–‡ä»¶ç±»å‹
        if (!file.type.match('video.*')) {
          showError('âŒ è¯·ä¸Šä¼ è§†é¢‘æ–‡ä»¶', errorMessage)
          return
        }

        inputFile = file
        videoUrl = URL.createObjectURL(file)

        // è®¾ç½®è§†é¢‘æº
        videoPlayer.src = videoUrl

        // å¯ç”¨æˆªå›¾æŒ‰é’®
        captureBtn.disabled = false
        downloadAllBtn.disabled = true

        // é‡ç½®æˆªå›¾
        screenshots = []
        screenshotCount = 0
        updateResultContainer()

        statusMessage.textContent = `âœ… å·²åŠ è½½è§†é¢‘: ${
          file.name
        } (${formatFileSize(file.size)})`
        errorMessage.textContent = ''
      }

      // æˆªå–å½“å‰å¸§
      async function captureFrame() {
        if (!inputFile || !videoPlayer.src) {
          showError('âŒ è¯·å…ˆä¸Šä¼ è§†é¢‘æ–‡ä»¶', errorMessage)
          return
        }

        let currentTime = videoPlayer.currentTime
        if (currentTime <= 0) {
          currentTime = 0
        }

        // æ˜¾ç¤ºè¿›åº¦
        progressFill.style.width = '0%'
        progressText.textContent = 'ğŸ”„ åˆå§‹åŒ–ä¸­...'
        captureBtn.disabled = true

        try {
          // åˆå§‹åŒ–FFmpeg
          if (!ffmpeg) {
            statusMessage.textContent = 'ğŸš€ æ­£åœ¨åŠ è½½FFmpegå¼•æ“...'

            const { createFFmpeg, fetchFile } = FFmpeg
            ffmpeg = createFFmpeg({
              log: true,
              progress: ({ ratio }) => {
                const percent = Math.floor(ratio * 100)
                progressFill.style.width = `${percent}%`
                progressText.textContent = `âš¡ å¤„ç†ä¸­: ${percent}%`
              },
            })

            await ffmpeg.load()
          }

          statusMessage.textContent = `ğŸ“¸ æ­£åœ¨æˆªå– ${formatTime(
            currentTime
          )} çš„ç”»é¢...`

          // å†™å…¥è§†é¢‘æ–‡ä»¶åˆ°è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
          const inputName = 'input.' + inputFile.name.split('.').pop()
          ffmpeg.FS('writeFile', inputName, await FFmpeg.fetchFile(inputFile))

          // æ„å»ºè¾“å‡ºæ–‡ä»¶å
          const timestamp = Math.floor(currentTime)
          screenshotCount++
          const outputName = `screenshot_${screenshotCount}_${timestamp}s.jpg`

          // æ‰§è¡ŒFFmpegæˆªå›¾å‘½ä»¤
          await ffmpeg.run(
            '-ss',
            String(currentTime),
            '-i',
            inputName,
            '-vframes',
            '1',
            '-q:v',
            '2',
            outputName
          )

          // è¯»å–è¾“å‡ºæ–‡ä»¶
          const data = ffmpeg.FS('readFile', outputName)
          const blob = new Blob([data.buffer], { type: 'image/jpeg' })
          const url = URL.createObjectURL(blob)

          // ä¿å­˜æˆªå›¾ä¿¡æ¯
          screenshots.push({
            id: screenshotCount,
            time: currentTime,
            url: url,
            blob: blob,
            filename: outputName,
          })

          // æ›´æ–°ç»“æœå±•ç¤º
          updateResultContainer()

          progressText.textContent = 'âœ… æˆªå›¾å®Œæˆ!'
          statusMessage.textContent = `ğŸ‰ æˆåŠŸæˆªå– ${formatTime(
            currentTime
          )} çš„ç”»é¢`
          downloadAllBtn.disabled = false
        } catch (error) {
          console.error('æˆªå›¾å¤±è´¥:', error)
          showError(`âŒ æˆªå›¾å¤±è´¥: ${error.message}`, errorMessage)
        } finally {
          captureBtn.disabled = false
        }
      }

      // æ›´æ–°ç»“æœå±•ç¤ºåŒºåŸŸ
      function updateResultContainer() {
        if (screenshots.length === 0) {
          resultContainer.innerHTML =
            '<p style="text-align: center; width: 100%; padding: 40px 0; color: var(--text-secondary); font-size: 1.1rem;">ğŸ“· æˆªå›¾å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</p>'
          return
        }

        resultContainer.innerHTML = ''
        screenshots.forEach((screenshot, index) => {
          const item = document.createElement('div')
          item.className = 'screenshot-item'
          item.style.animationDelay = `${index * 0.1}s`
          item.innerHTML = `
                    <img src="${screenshot.url}" alt="è§†é¢‘æˆªå›¾">
                    <div class="screenshot-info">
                        <span>#${screenshot.id}</span>
                        <span>${formatTime(screenshot.time)}</span>
                    </div>
                    <button class="download-btn" data-id="${
                      screenshot.id
                    }">ğŸ“¥ ä¸‹è½½</button>
                `
          resultContainer.appendChild(item)
        })

        // æ·»åŠ ä¸‹è½½æŒ‰é’®äº‹ä»¶
        document.querySelectorAll('.download-btn').forEach((btn) => {
          btn.addEventListener('click', (e) => {
            const id = parseInt(e.target.getAttribute('data-id'))
            const screenshot = screenshots.find((s) => s.id === id)
            if (screenshot) {
              downloadScreenshot(screenshot)
            }
          })
        })
      }

      // ä¸‹è½½å•å¼ æˆªå›¾
      function downloadScreenshot(screenshot) {
        const a = document.createElement('a')
        a.href = screenshot.url
        a.download = screenshot.filename
        a.click()

        statusMessage.textContent = 'ğŸ“¥ æˆªå›¾ä¸‹è½½ä¸­...'
      }

      // ä¸‹è½½æ‰€æœ‰æˆªå›¾
      function downloadAllScreenshots() {
        screenshots.forEach((screenshot, index) => {
          setTimeout(() => {
            const a = document.createElement('a')
            a.href = screenshot.url
            a.download = screenshot.filename
            document.body.appendChild(a)
            a.click()
            document.body.removeChild(a)
          }, index * 200) // å»¶è¿Ÿä¸‹è½½é¿å…æµè§ˆå™¨é˜»æ­¢
        })

        statusMessage.textContent = 'ğŸ“¥ æ­£åœ¨ä¸‹è½½æ‰€æœ‰æˆªå›¾...'
      }

      // é‡ç½®æ‰€æœ‰
      function resetAll() {
        if (confirm('ğŸ¤” ç¡®å®šè¦é‡ç½®æ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
          screenshots = []
          screenshotCount = 0

          if (videoUrl) {
            URL.revokeObjectURL(videoUrl)
            videoUrl = null
          }

          // é‡Šæ”¾æˆªå›¾URL
          screenshots.forEach((screenshot) => {
            URL.revokeObjectURL(screenshot.url)
          })

          videoInput.value = ''
          videoPlayer.src = ''
          captureBtn.disabled = true
          downloadAllBtn.disabled = true
          progressFill.style.width = '0%'
          progressText.textContent = 'ğŸš€ å‡†å¤‡å°±ç»ª'
          statusMessage.textContent = ''
          errorMessage.textContent = ''
          updateResultContainer()
        }
      }

      // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
      function showError(message, element) {
        element.textContent = message
        element.classList.add('error-shake')
        setTimeout(() => {
          element.classList.remove('error-shake')
          element.textContent = ''
        }, 5000)
      }

      // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
      function formatFileSize(bytes) {
        if (bytes < 1024) return bytes + ' bytes'
        else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB'
        else return (bytes / 1048576).toFixed(1) + ' MB'
      }

      // æ ¼å¼åŒ–æ—¶é—´
      function formatTime(seconds) {
        const mins = Math.floor(seconds / 60)
        const secs = Math.floor(seconds % 60)
        return `${mins.toString().padStart(2, '0')}:${secs
          .toString()
          .padStart(2, '0')}`
      }

      // åˆå§‹åŒ–
      window.onload = initEvents
    </script>
  </body>
</html>
